docker run -i -t -d --mount type=bind,source=/home/llj,target=/home/llj ubuntu:18.04 /bin/bash
docker start -i -t --mount type=bind,source=/home/llj,target=/home/llj 6858bca1a928
docker run -i -t -d --user root  --privileged -v /home/llj:/home/llj:rw forgem5 /bin/bash
c61d571fafa

compile gem5
python3 `which scons` build/X86/gem5.opt -j70

TBENCH_QPS=2000 TBENCH_MAXREQS=10000 TBENCH_WARMUPREQS=1000 TBENCH_MINSLEEPNS=10000 /home/llj/Tailbench/tailbench/masstree/mttest_integrated -j1 mycsba masstree

TBENCH_QPS=2000 TBENCH_MAXREQS=10000 TBENCH_WARMUPREQS=1000 TBENCH_MINSLEEPNS=10000 /home/llj/Tailbench/tailbench/masstree/mttest_gem5se -j1 mycsba masstree -s1

build/X86/gem5.opt configs/example/se.py --cmd='/home/llj/Tailbench/tailbench/masstree/mttest_integrated -j1 mycsba masstree' --cpu-type=X86O3CPU --l1d_size=64kB --l1i_size=16kB --caches

/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64 3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of

build/X86/gem5.opt configs/example/se.py --cmd='/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' --options="3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of" --cpu-type=X86O3CPU --l1d_size=64kB --l1i_size=16kB --l2_size=512kB --caches

build/X86/gem5.opt configs/example/se.py --env='/home/llj/Pivot/mastreeenv.txt' --cmd='/home/llj/Tailbench/tailbench/masstree/mttest_integrated' --options="-j1 mycsba masstree" --cpu-type=X86O3CPU --l1d_size=64kB --l1i_size=16kB --l2_size=512kB --caches

       
cd /home/llj/Pivot/
build/X86/gem5.opt configs/example/se.py --env='/home/llj/Pivot/mastreeenv.txt' --cmd='/home/llj/Tailbench/tailbench/masstree/mttest_gem5se' --options="-j1 mycsba masstree -s1" --cpu-type=X86O3CPU --l1d_size=64kB --l1i_size=16kB --l2_size=512kB --caches > mastree.out

cd /home/llj/Tailbench/tailbench/masstree

X86TimingSimpleCPU AtomicSimpleCPU



co-run

build/X86/gem5.opt configs/example/se.py -n=2 --env='/home/llj/Pivot/mastreeenv.txt' --cmd='/home/llj/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' --options="-j1 mycsba masstree -s1;3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of" --cpu-type=X86O3CPU --caches --l2cache --l3cache --l1d_size=64kB --l1d_assoc=4 --l1i_size=64kB --l1i_assoc=4 --l2_size=512kB  --l2_assoc=8  --l3_size=4MB --mem-type=DDR5_6400_4x8  --mem-size=16GB  > mastreelbm.out

build/X86/gem5.opt configs/example/se.py -n=2 --env=/home/llj/Pivot/mastreeenv.txt '--cmd=/home/llj/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' '--options=-j1 mycsba masstree -s1;3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of' --cpu-type=X86O3CPU --caches --l2cache --l3cache --l1d_size=64kB --l1d_assoc=4 --l1i_size=64kB --l1i_assoc=4 --l2_size=512kB --l2_assoc=8 --l3_size=4MB --mem-type=DDR5_6400_4x8 --mem-size=16GB --dualRowBuffer=True > dualRowBuffer.out

solo-run

build/X86/gem5.opt configs/example/se.py -n=1 --env='/home/llj/Pivot/mastreeenv.txt' --cmd='/home/llj/Tailbench/tailbench/masstree/mttest_gem5se' --options="-j1 mycsba masstree -s1" --cpu-type=X86O3CPU --caches --l2cache --l3cache --l1d_size=64kB --l1d_assoc=4 --l1i_size=64kB --l1i_assoc=4 --l2_size=512kB  --l2_assoc=8  --l3_size=4MB --mem-type=DDR5_6400_4x8  --mem-size=16GB > mastree.out

build/X86/gem5.opt \
configs/example/se.py \
-n=2 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/wjy/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' \
--options="-j1 mycsba masstree -s1;3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="112MB" --l3c_assoc=14 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="30%" \
> singlerowbuffer.out 

build/X86/gem5.opt \
configs/example/se.py \
-n=2 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/wjy/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' \
--options="-j1 mycsba masstree -s1;3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="112MB" --l3c_assoc=14 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="30%" \
--dualRowBuffer
> dualrowbuffer.out 


build/X86/gem5.opt \
configs/example/se.py \
-n=8 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/wjy/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64' \
--options="-j1 mycsba masstree -s1;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="64MB" --l3c_assoc=8 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="10%" \
> singlerowbuffer.out &

sleep 7200
pkill -f gem5.opt

build/X86/gem5.opt \
configs/example/se.py \
-n=8 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/wjy/Tailbench/tailbench/masstree/mttest_gem5se;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64' \
--options="-j1 mycsba masstree -s1;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in;/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="64MB" --l3c_assoc=8 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="10%" \
--dualRowBuffer \
> dualrowbuffer.out &

sleep 7200
pkill -f gem5.opt

build/X86/gem5.opt \
configs/example/se.py \
-n=1 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/mcf_r_base.mytest-m64;' \
--options="/home/llj/dockerspec/benchspec/CPU/505.mcf_r/run/run_base_refrate_mytest-m64.0000/inp.in" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="8MB" --l3c_assoc=1 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="10%" \
> Results/mcf.out &

build/X86/gem5.opt \
configs/example/se.py \
-n=1 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/lbm_r_base.mytest-m64' \
--options="3000 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/eference.dat 0 0 /home/llj/dockerspec/benchspec/CPU/519.lbm_r/run/run_base_refrate_mytest-m64.0000/100_100_130_ldc.of" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="8MB" --l3c_assoc=1 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="10%" \
> Results/lbm.out &

build/X86/gem5.opt \
configs/example/se.py \
-n=1 --env='/home/wjy/Pivot/mastreeenv.txt' \
--cmd='/home/llj/dockerspec/benchspec/CPU/541.leela_r/run/run_base_refrate_mytest-m64.0000/leela_r_base.mytest-m64' \
--options="/home/llj/dockerspec/benchspec/CPU/541.leela_r/run/run_base_refrate_mytest-m64.0000/ref.sgf" \
--cpu-type=X86O3CPU \
--caches --l2cache --l3cache --l1d_size="48kB" --l1d_assoc=12 --l1i_size="32kB" --l1i_assoc=8 --l2_size="2MB"  --l2_assoc=16  \
--l3c_size="8MB" --l3c_assoc=1 --l3b_size="8MB" --l3b_assoc=1 \
--mem-type=DDR5_6400_4x8  --mem-size=64GB \
--latency_critical_num=1 \
--test_mode="MBA" \
--MBACtrl="10%" \
> Results/leela.out &